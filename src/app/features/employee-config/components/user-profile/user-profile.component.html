<div class="profile-container">
  <h2 class="mb-4">{{ 'profile.title' | transloco }}</h2>

  <form [formGroup]="profileForm" (ngSubmit)="saveProfile()">
    <div class="form-grid">
      <mat-form-field appearance="outline">
        <mat-label>{{ 'profile.name' | transloco }}</mat-label>
        <input matInput formControlName="name" required>
        <mat-error *ngIf="profileForm.get('name')?.hasError('required')">
          {{ 'profile.errors.name_required' | transloco }}
        </mat-error>
      </mat-form-field>

      <mat-form-field appearance="outline">
        <mat-label>{{ 'profile.country' | transloco }}</mat-label>
        <mat-select formControlName="country" required>
          <mat-option *ngFor="let country of availableCountries" [value]="country">
            {{ 'countries.' + country | transloco }}
          </mat-option>
        </mat-select>
        <mat-error *ngIf="profileForm.get('country')?.hasError('required')">
          {{ 'profile.errors.country_required' | transloco }}
        </mat-error>
      </mat-form-field>

      <div class="checkbox-container">
        <mat-checkbox formControlName="startedThisYear">
          {{ 'profile.started_this_year' | transloco }}
        </mat-checkbox>
      </div>

      <mat-form-field appearance="outline">
        <mat-label>{{ 'profile.annual_allowance_days' | transloco }}</mat-label>
        <input matInput type="number" formControlName="annualAllowanceDays" required>
        <mat-hint>{{ 'profile.equivalent_hours' | transloco }}: {{ convertDaysToHours(getAnnualAllowanceDays()) }}</mat-hint>
        <mat-error *ngIf="profileForm.get('annualAllowanceDays')?.hasError('required')">
          {{ 'profile.errors.allowance_required' | transloco }}
        </mat-error>
        <mat-error *ngIf="profileForm.get('annualAllowanceDays')?.hasError('min')">
          {{ 'profile.errors.allowance_min' | transloco }}
        </mat-error>
      </mat-form-field>

      <mat-form-field appearance="outline">
        <mat-label>{{ 'profile.unused_previous_year_hours' | transloco }}</mat-label>
        <input matInput type="number" formControlName="unusedPreviousYearHours" required>
        <mat-hint>{{ 'profile.equivalent_days' | transloco }}: {{ convertHoursToDays(getUnusedPreviousDays()) }}</mat-hint>
        <mat-error *ngIf="profileForm.get('unusedPreviousYearDays')?.hasError('min')">
          {{ 'profile.errors.unused_days_min' | transloco }}
        </mat-error>
      </mat-form-field>
    </div>

    <div class="leave-metrics">
      <mat-card class="metric-card">
        <mat-card-header>
          <mat-card-title>{{ 'profile.total_available_days' | transloco }}</mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <div class="metric-value">{{ totalAvailableDays | number:'1.1-1' }}</div>
          <div class="metric-subtitle">{{ 'profile.equivalent_hours' | transloco }}: {{ totalAvailableHours | number:'1.0-0' }}</div>
        </mat-card-content>
      </mat-card>
    </div>

    <div class="form-actions">
      <button mat-raised-button color="primary" type="submit" [disabled]="!profileForm.valid">
        {{ 'profile.save' | transloco }}
      </button>
    </div>
  </form>
</div>