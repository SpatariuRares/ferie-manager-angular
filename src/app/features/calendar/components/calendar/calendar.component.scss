@import '../../../../styles/variables';
@import '../../../../styles/mixins';

:host {
  display: block;
}

// Container
.calendar-container {
  max-width: 1200px;
  margin: 0 auto;
  padding: map-get($spacing, 'md');
}

// Cards
.top-controls-card,
.calendar-card,
.leave-info-card,
.leave-table-card {
  background-color: $color-surface;
  border-radius: map-get($spacing, 'sm');
  box-shadow: 0 2px 4px $color-shadow;
  overflow: hidden;
  margin-bottom: map-get($spacing, 'lg');
}

// Card headers
mat-card-header {
  background-color: $primary;
  color: $color-surface;
  padding: map-get($spacing, 'sm') map-get($spacing, 'md');

  mat-card-title {
    margin: 0;
    font-size: 1.125rem;
    font-weight: 500;
  }
}

// Year selector
.year-selector {
  mat-button-toggle-group {
    border-radius: map-get($spacing, 'xs');
    overflow: hidden;

    mat-button-toggle {
      min-width: $calendar-day-size * 2;
      background-color: $color-border;

      &.mat-button-toggle-checked {
        background-color: $primary;
        color: $color-surface;
      }
    }
  }
}

// Country selector
.country-selector {
  mat-form-field {
    width: $calendar-day-size * 5;
  }
}

// Leave info cards
.leave-info-card {
  display: flex;
  flex-direction: column;

  &.available-leave mat-card-header {
    background-color: $primary;
  }

  &.used-leave mat-card-header {
    background-color: $accent;
  }

  mat-card-content {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: map-get($spacing, 'lg');
    text-align: center;

    .text-4xl {
      font-size: 2.25rem;
      font-weight: 700;
      margin-bottom: map-get($spacing, 'xs');
    }

    .text-gray-600 {
      color: $color-text;
    }

    .text-gray-500 {
      color: lighten($color-text, 20%);
      font-size: 0.875rem;
      margin-top: map-get($spacing, 'xs');
    }
  }
}

// Leave table
.leave-table-card {
  table {
    width: 100%;
    border-collapse: collapse;
  }

  th.mat-header-cell {
    background-color: lighten($color-border, 10%);
    font-weight: 500;
    color: $color-text;
  }

  th.mat-header-cell,
  td.mat-cell {
    padding: map-get($spacing, 'sm') map-get($spacing, 'md');
    text-align: left;
    border-bottom: 1px solid $color-border;
  }

  tr.mat-row:hover {
    background-color: rgba($color-border, 0.2);
  }

  .no-data {
    text-align: center;
    padding: map-get($spacing, 'lg');
    color: lighten($color-text, 30%);
  }
}

// Navigation buttons
.nav-button {
  background-color: $primary;
  color: $color-surface;
  border: none;
  border-radius: 50%;
  width: $calendar-day-size;
  height: $calendar-day-size;
  @include flex-center;
  cursor: pointer;

  &:disabled {
    background-color: $color-border;
  }
}

// Calendar day styles
.calendar-day {
  @include calendar-day-base;

  &.weekend {
    background-color: $calendar-day-weekend;
    color: darken($calendar-day-weekend, 40%);
  }

  &.holiday {
    background-color: $calendar-day-holiday;
    color: darken($calendar-day-holiday, 30%);
  }

  &.selected {
    background-color: $calendar-day-selected;
    color: $color-surface;
  }

  &.today {
    background-color: $calendar-day-today;
    color: $color-surface;
    font-weight: bold;
  }

  &.normal {
    background-color: $calendar-day-normal;
    color: $color-text;
  }

  &.leave {
    background-color: $calendar-day-leave;
    color: darken($calendar-day-leave, 30%);
  }
}

// Utility classes (consider moving to a global utility stylesheet)
.flex {
  display: flex;
}

.flex-col {
  flex-direction: column;
}

.flex-1 {
  flex: 1;
}

.justify-between {
  justify-content: space-between;
}

.justify-end {
  justify-content: flex-end;
}

.items-center {
  align-items: center;
}

.text-center {
  text-align: center;
}

.gap-4 {
  gap: map-get($spacing, 'md');
}

.mb-2 {
  margin-bottom: map-get($spacing, 'sm');
}

.mb-4 {
  margin-bottom: map-get($spacing, 'lg');
}

.mt-2 {
  margin-top: map-get($spacing, 'sm');
}

.mt-4 {
  margin-top: map-get($spacing, 'lg');
}

.text-white {
  color: $color-surface;
}

// Responsive behavior
@media (max-width: map-get($breakpoints, 'md')) {
  .md\:flex-row {
    flex-direction: column;
  }

  .leave-table {
    th, td {
      padding: map-get($spacing, 'xs') map-get($spacing, 'sm');
    }

    th:nth-child(3), td:nth-child(3),
    th:nth-child(4), td:nth-child(4) {
      display: none;
    }
  }
}